(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{217:function(e,t,a){},253:function(e,t,a){e.exports=a(428)},264:function(e,t,a){},371:function(e,t,a){},420:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},427:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),o=a.n(c),l=a(60),u=a(15),s=a(219),i=a(22),m={route:"",loggedIn:!1,error:"",currentUser:""};var p={userData:{}};var h=a(242),d="READ",f={cards:[],error:"",posting:!1};var E={filter:""};var v=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE":case"LIKE":return Object(i.a)({},e,{userData:e.userData=t.value});default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)({},e,{cards:e.cards=t.value});case"POST":return Object(i.a)({},e,{cards:e.cards=[].concat(Object(h.a)(e.cards),[t.value])});case"UPVOTE":return Object(i.a)({},e,{cards:e.cards=e.cards.map((function(e){return e._id===t.value._id&&(e=t.value),e}))});case"ERROR":return Object(i.a)({},e,{error:e.error=t.value});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE":return Object(i.a)({},e,{route:e.route=t.route});case"AUTHENTICATE":return Object(i.a)({},e,{loggedIn:e.loggedIn=!0},e,{currentUser:e.currentUser=t.value});case"DEAUTHENTICATE":return Object(i.a)({},e,{loggedIn:e.loggedIn=!1},e,{currentUser:e.currentUser=""});case"ERROR":return Object(i.a)({},e,{error:e.error=t.value});default:return e}},nav:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTERFETCH":return Object(i.a)({},e,{filter:e.filter=t.value});default:return e}}}),g=a(19),b=a(53),w=a(73),O=a(69),j=a(17),x=a.n(j),k=a(27),y=function(){var e=Object(u.b)(),t=(Object(b.g)(),Object(u.c)((function(e){return e.auth.loggedIn})),Object(n.useState)({})),a=Object(w.a)(t,2),r=a[0],c=a[1];return{handleInputChange:function(e){e.preventDefault(),c(Object(i.a)({},r,Object(O.a)({},e.target.name,e.target.value)))},handleSubmit:function(t,a){console.log(r),t.preventDefault(),e(function(e,t){return function(){var a=Object(k.a)(x.a.mark((function a(n){var r,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://localhost:8000/api/auth/".concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return r=a.sent,a.next=6,r.json();case 6:c=a.sent,console.log(c),200===c.status&&(window.sessionStorage.token=c.token,n({type:"AUTHENTICATE",value:c.user})),n({type:"ERROR",value:c.message}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log("Authenticate Error",a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(a,r))}}},C=a(445),S=a(443),I=a(440),T=a(438),F=a(430),R=a(442),A=a(444),N=a(61),P=(a(264),function(){var e=Object(n.useState)(),t=Object(w.a)(e,2),a=t[0],c=t[1],o=y(),l=o.handleInputChange,s=o.handleSubmit,i=Object(u.c)((function(e){return e.auth.loggedIn})),m=Object(u.c)((function(e){return e.auth.error}));return r.a.createElement(C.a,{columns:2,divided:!0,id:"entry-grid"},r.a.createElement(C.a.Column,{id:"left-entry-column"},r.a.createElement(S.a,{id:"description-menu",vertical:!0,secondary:!0},r.a.createElement(S.a.Item,{icon:"search",name:"Follow your interests."}),r.a.createElement(S.a.Item,{icon:"users",name:"Hear what other people are talking about."}),r.a.createElement(S.a.Item,{icon:"comment outline",name:"Join the conversation."}))),r.a.createElement(C.a.Column,{id:"right-entry-column"},r.a.createElement(C.a.Row,null,r.a.createElement(I.a,{id:"entry-form",onSubmit:function(e){return s(e,a)}},r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{focus:!0,placeholder:"Email",type:"email",name:"email",onChange:l})),r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{focus:!0,placeholder:"Password",type:"password",name:"password",onChange:l})),r.a.createElement(I.a.Field,null,r.a.createElement(F.a,{onClick:function(){return c("login")}},"Log in"))),m?r.a.createElement(R.a,{negative:!0},m):null),r.a.createElement(C.a.Row,{id:"right-column-bottom-row"},r.a.createElement("div",{id:"description"},r.a.createElement(A.a,{as:"h1"},r.a.createElement(N.a,{name:"sticky note"})),r.a.createElement(A.a,{as:"h1"},"See what's happening in the world right now")),r.a.createElement("div",{id:"modal-buttons"},r.a.createElement("p",null,"Join Community Cards today."),r.a.createElement(g.b,{to:"/register"},r.a.createElement(F.a,{id:"register-button"},"Register")),r.a.createElement(g.b,{to:"/login"},r.a.createElement(F.a,{id:"login-button"},"Log in"))))),r.a.createElement(C.a.Row,{id:"footer"},r.a.createElement("button",{onClick:function(){return console.log(i)}},"LOGGEED"),r.a.createElement("h6",null,"About"),r.a.createElement("h6",null,"About"),r.a.createElement("h6",null,"About"),r.a.createElement("h6",null,"About"),r.a.createElement("h6",null,"About"),r.a.createElement("h6",null,"About")))}),U=a(441),L=(a(371),function(){var e=window.location.pathname.substring(1),t=y(),a=t.handleInputChange,n=t.handleSubmit,c=Object(u.c)((function(e){return e.auth.error}));return r.a.createElement(U.a,{open:!0,id:"auth-modal"},r.a.createElement(U.a.Content,null,r.a.createElement(I.a,{onSubmit:function(t){return n(t,e)}},r.a.createElement("h3",null,"Create Your Account"),c?r.a.createElement(R.a,{negative:!0},c):null,r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{focus:!0,type:"text",name:"username",placeholder:"Username",onChange:a})),r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{type:"email",name:"email",placeholder:"Email",onChange:a})),r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{type:"password",name:"password",placeholder:"Password",onChange:a})),r.a.createElement(F.a,null,"Submit"))))}),D=(a(420),function(){var e=window.location.pathname.substring(1),t=y(),a=t.handleInputChange,n=t.handleSubmit,c=Object(u.c)((function(e){return e.auth.error}));return r.a.createElement("div",{id:"login"},r.a.createElement("div",{id:"login-header"},r.a.createElement(A.a,{as:"h2"},r.a.createElement(N.a,{name:"sticky note"})),r.a.createElement("h2",null,"Log in to Community Cards"),c?r.a.createElement(R.a,{negative:!0},c):null),r.a.createElement(I.a,{onSubmit:function(t){return n(t,e)}},r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{focus:!0,type:"email",name:"email",placeholder:"email",onChange:a})),r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{focus:!0,type:"password",name:"password",placeholder:"password",onChange:a})),r.a.createElement(F.a,null,"Log in")))}),H=function(){var e=Object(u.b)();return function(){e({type:"DEAUTHENTICATE"}),window.sessionStorage.token=void 0}},J=(a(421),function(){var e=Object(u.c)((function(e){return e.auth.currentUser})),t=H();return r.a.createElement(S.a,{vertical:!0,secondary:!0,id:"nav"},r.a.createElement(S.a.Item,{icon:"sticky note"}),r.a.createElement(g.c,{exact:!0,to:"/home",className:"item"},r.a.createElement(N.a,{name:"home"}),"Home"),r.a.createElement(g.c,{exact:!0,to:"/explore",className:"item"},r.a.createElement(N.a,{name:"globe"}),"Explore"),r.a.createElement(g.c,{exact:!0,to:"/".concat(e),className:"item"},r.a.createElement(N.a,{name:"user circle"}),"Profile"),r.a.createElement(g.c,{exact:!0,to:"/logout",className:"item",onClick:function(){return t()}},r.a.createElement(N.a,{name:"sign out"}),"Log out"),r.a.createElement(g.c,{exact:!0,to:"/create",className:"item"},r.a.createElement(N.a,{name:"plus"}),"Create a Card"))}),_=function(){var e=Object(u.b)(),t=Object(b.g)(),a=Object(n.useState)({}),r=Object(w.a)(a,2),c=r[0],o=r[1];return{handleInputChange:function(e){var t=e.currentTarget.value.match(/[#]\S[a-zA-Z]*/g),a=t&&t.map((function(e){return e.substring(1)}));c.tags=a,e.preventDefault(),o(Object(i.a)({},c,Object(O.a)({},e.target.name,e.target.value)))},handleSubmit:function(a,n){a.preventDefault(),e(function(e,t){return function(){var a=Object(k.a)(x.a.mark((function a(n){var r,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://localhost:8000/api/card/".concat(t),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json","auth-token":window.sessionStorage.token}});case 3:return r=a.sent,a.next=6,r.json();case 6:c=a.sent,n({type:"POST",value:c}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("Authenticate Error",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(c,n)),t.push("/home")}}},G=function(){var e=Object(u.b)();return{upvote:function(t){var a,n;console.log(t),e((a=t._id,function(){var e=Object(k.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(a),e.next=4,fetch("http://localhost:8000/api/card/upvote/".concat(a),{method:"PUT",headers:{"auth-token":window.sessionStorage.token}});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t({type:"UPVOTE",value:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),e((n=t.user_username,function(){var e=Object(k.a)(x.a.mark((function e(t){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(n),e.next=4,fetch("http://localhost:8000/api/user/like/".concat(n),{method:"PUT",headers:{"auth-token":window.sessionStorage.token}});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,t({type:"PROFILE",value:r}),console.log(r),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()))},follow:function(t){var a;e((a=t,function(){var e=Object(k.a)(x.a.mark((function e(t,n){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(a),e.next=4,fetch("http://localhost:8000/api/user/follow/".concat(a),{method:"PUT",headers:{"auth-token":window.sessionStorage.token}});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,t({type:"PROFILE",value:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())),e(function(e){return function(){var t=Object(k.a)(x.a.mark((function t(a,n){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:8000/api/user/followed/".concat(e),{method:"PUT",headers:{"auth-token":window.sessionStorage.token}});case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,a({type:"PROFILE",value:c}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}}},z=function(e){var t=e.card,a=G().upvote;return r.a.createElement(N.a,{name:"heart outline",onClick:function(){return a(t)}})},V=(a(422),function(){return r.a.createElement(N.a,{name:"heart",id:"upvoted"})}),W=a(240),Z=a.n(W),B=function(e){var t=e.card;return r.a.createElement("p",null,Z()(t.body,/(#\S[a-zA-Z]*)/gi,(function(e,t){return r.a.createElement(g.b,{to:"/tagged/".concat(e.substring(1)),key:t,className:"tag"},e)})))},K=(a(423),function(){var e=Object(u.b)(),t=Object(b.h)(),a=Object(u.c)((function(e){return e.card.cards})),c="/explore"===t.path,o="/home"===t.path,l="/:username"===t.path,s="/:username/likes"===t.path,i="/tagged/:tag"===t.path,m=t.params.tag,p=t.params.username;Object(n.useEffect)((function(){c&&e(function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/card/all",{headers:{"auth-token":window.sessionStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),t({type:d,value:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),o&&e(function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/card/personal",{headers:{"auth-token":window.sessionStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),t({type:d,value:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),l&&e(function(e){return function(){var t=Object(k.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:8000/api/card/profile/".concat(e),{headers:{"auth-token":window.sessionStorage.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,console.log(r),a({type:d,value:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(p)),s&&e(function(e){return function(){var t=Object(k.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:8000/api/card/likes/".concat(e),{headers:{"auth-token":window.sessionStorage.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,console.log(r),a({type:d,value:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(p)),i&&e(function(e){return function(){var t=Object(k.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:8000/api/card/tagged/".concat(e),{headers:{"auth-token":window.sessionStorage.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,console.log(r),a({type:d,value:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(m)),console.log(t)}),[t.path]);var h=a.map&&a.map((function(e,t){return r.a.createElement(C.a.Row,{id:"card-row",key:t},r.a.createElement(g.b,{to:"/".concat(e.user_username)},r.a.createElement(N.a,{name:"user circle"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"user-user-options"},e.user_username," ",r.a.createElement(N.a,{name:"chevron down"})),r.a.createElement(B,{card:e}),r.a.createElement("div",{className:"card-menu"},e.upvoted?r.a.createElement(V,null):r.a.createElement(z,{card:e}))))}));return r.a.createElement(r.a.Fragment,null,h)}),Y=(a(217),function(){var e=_(),t=e.handleInputChange,a=e.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a.Row,{id:"home-row"},"Home"),r.a.createElement(C.a.Row,{id:"home-menu"},r.a.createElement(N.a,{name:"user circle outline"}),r.a.createElement(I.a,{onSubmit:function(e){return a(e,"/post")}},r.a.createElement(I.a.Field,null,r.a.createElement(T.a,{type:"text",name:"body",placeholder:"What's happening?",onChange:t})),r.a.createElement(F.a,null,"Submit"))),r.a.createElement(K,null))}),q=function(e){var t=e.userToFollow,a=G().follow;return r.a.createElement(F.a,{onClick:function(){return a(t)}},"Follow")},M=function(){return r.a.createElement(F.a,null,"Following")},Q=a(241),X=(a(424),function(){var e=Object(b.h)(),t=Object(u.b)(),a=window.location.pathname,c=Object(u.c)((function(e){return e.user.userData}));Object(u.c)((function(e){return e.auth.currentUser}));return Object(n.useEffect)((function(){var e;t((e=a,function(){var t=Object(k.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:8000/api/user/profile".concat(e),{headers:{"auth-token":window.sessionStorage.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,a({type:"PROFILE",value:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))}),[c.followers&&c.followers.length]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a.Row,{id:"top"},r.a.createElement(g.c,{to:"/home"},r.a.createElement(N.a,{name:"arrow left"})),r.a.createElement("div",null,r.a.createElement("h3",null,c.username),r.a.createElement("small",null," 0 posts"))),r.a.createElement(C.a.Row,{id:"banner"},r.a.createElement(Q.a,{src:"https://media.tacdn.com/media/attractions-splice-spp-674x446/07/88/4d/9a.jpg",fluid:!0})),r.a.createElement(C.a.Row,{id:"information"},r.a.createElement(N.a,{name:"user circle"}),r.a.createElement("div",{className:"information-text"},r.a.createElement("div",null,r.a.createElement("h3",null,c.username),r.a.createElement("p",null,c.email)),c.isFollowing?r.a.createElement(M,null):r.a.createElement(q,{userToFollow:c.username})),r.a.createElement("div",{className:"profile-stats"},r.a.createElement("span",{className:"num"},c.following&&c.following.length)," Following ",r.a.createElement("span",{className:"num"},c.followers&&c.followers.length)," Followers"),r.a.createElement(S.a,{pointing:!0,secondary:!0,id:"profile-nav"},r.a.createElement(g.c,{exact:!0,to:"/".concat(e.params.username)},"Cards"),r.a.createElement(g.c,{exact:!0,to:"/".concat(e.params.username,"/likes")},"Likes"))),r.a.createElement(K,null))}),$=a(439),ee=(a(425),function(){var e=_(),t=e.handleInputChange,a=e.handleSubmit;return r.a.createElement(U.a,{open:!0,id:"create-modal",centered:!1},r.a.createElement(U.a.Header,null,"Create a Card"),r.a.createElement(U.a.Content,null,r.a.createElement(I.a,{onSubmit:function(e){return a(e,"/post")}},r.a.createElement(I.a.Field,null,r.a.createElement($.a,{placeholder:"Create a card",onChange:t,name:"body"})),r.a.createElement(F.a,null,"Post"))))}),te=function(){var e=Object(u.c)((function(e){return e.card.cards}));return r.a.createElement(C.a,{columns:3,divided:!0,id:"layout-grid"},r.a.createElement(C.a.Column,{id:"left-column"},r.a.createElement(J,null)),r.a.createElement(C.a.Column,{id:"center-column"},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/home",component:Y}),r.a.createElement(b.b,{exact:!0,path:["/explore","/tagged/:tag"],component:K}),r.a.createElement(b.b,{exacth:!0,path:"/create",component:ee}),r.a.createElement(b.b,{exact:!0,path:["/:username","/:username/likes"],component:X})),0===e.length?r.a.createElement(C.a.Row,{id:"home-intro"},r.a.createElement("h3",null,"Welcome to Community Cards"),r.a.createElement("p",null,"This is a twitter clone that captures the essentials of twitter")):null),r.a.createElement(C.a.Column,{id:"layout-right-column"}))};a(426),a(427);var ae=function(){var e=Object(u.c)((function(e){return e.auth.loggedIn}));return r.a.createElement(g.a,null,r.a.createElement(b.b,{exact:!0,path:["/","/register","/logout"],component:P}),r.a.createElement(b.b,{exact:!0,path:"/register",component:L}),r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/login",component:D}),r.a.createElement(b.b,{exact:!0,path:["/home","/explore","/:username","/:username/likes","/tagged/:tag"],component:te})),e?r.a.createElement(b.a,{to:"/home"}):r.a.createElement(b.a,{to:"/"}))},ne=Object(l.d)(v,Object(l.a)(s.a));o.a.render(r.a.createElement(u.a,{store:ne},r.a.createElement(ae,null)),document.getElementById("root"))}},[[253,1,2]]]);
//# sourceMappingURL=main.e44941e6.chunk.js.map